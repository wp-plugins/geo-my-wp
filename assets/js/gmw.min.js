function gmwSetCookie(a,f,g){var h=new Date;h.setTime(h.getTime()+864E5*g);f=escape(encodeURIComponent(f))+(null==g?"":"; expires="+h.toUTCString());document.cookie=a+"="+f+"; path=/"}function gmwGetCookie(a){return(a=document.cookie.match("(^|;) ?"+a+"=([^;]*)(;|$)"))?decodeURIComponent(a[2]):null}function gmwDeleteCookie(a){document.cookie=encodeURIComponent(a)+"=deleted; expires="+(new Date(0)).toUTCString()}
jQuery(document).ready(function(a){function f(){function e(a){(new google.maps.Geocoder).geocode({latLng:new google.maps.LatLng(a.coords.latitude,a.coords.longitude)},function(a,b){b==google.maps.GeocoderStatus.OK?g(a):alert("Geocoder failed due to: "+b)})}function c(b){switch(b.code){case b.PERMISSION_DENIED:alert("User denied the request for Geolocation.");break;case b.POSITION_UNAVAILABLE:alert("Location information is unavailable.");break;case 3:alert("The request to get user location timed out.");
break;case b.UNKNOWN_ERROR:alert("An unknown error occurred")}a(".locator-submitted").closest(".gmw-locator-btn-wrapper").find(".gmw-locator-btn-loader").fadeToggle("fast",function(){a(".locator-submitted").fadeToggle("fast").removeClass("locator-submitted");a(".gmw-address").removeAttr("disabled");a(".gmw-submit").removeAttr("disabled")})}navigator.geolocation?navigator.geolocation.getCurrentPosition(e,c,{timeout:1E4}):alert("Sorry! Geolocation is not supported by this browser and we cannot locate you.")}
function g(e){var c=!1,b="",f="",k="",g="",l="",d=e[0].address_components,m=e[0].geometry.location.lat(),n=e[0].geometry.location.lng();gmwSetCookie("gmw_lat",m,7);gmwSetCookie("gmw_lng",n,7);gmwSetCookie("gmw_address",e[0].formatted_address,7);for(x in d)"street_number"==d[x].types&&(c=d[x].long_name),"route"==d[x].types&&(b=d[x].long_name,0!=c&&(b=c+" "+b),gmwSetCookie("gmw_street",b,7)),"administrative_area_level_1,political"==d[x].types&&(k=d[x].short_name,gmwSetCookie("gmw_state",d[x].short_name,
7)),"locality,political"==d[x].types&&(f=d[x].short_name,gmwSetCookie("gmw_city",d[x].short_name,7)),"postal_code"==d[x].types&&(g=d[x].short_name,gmwSetCookie("gmw_zipcode",d[x].short_name,7)),"country,political"==d[x].types&&(l=d[x].short_name,gmwSetCookie("gmw_country",d[x].short_name,7));1==h&&location.reload();a(".locator-submitted")[0]&&(gForm=a(".locator-submitted").closest("form"),a(".gmw-address").removeAttr("disabled"),a(".gmw-submit").removeAttr("disabled"),gForm.find(".gmw-address").hasClass("gmw-full-address")?
gForm.find(".gmw-full-address").val(e[0].formatted_address):(gForm.find(".gmw-saf-street").val(b),gForm.find(".gmw-saf-city").val(f),gForm.find(".gmw-saf-state").val(k),gForm.find(".gmw-saf-zipcode").val(g),gForm.find(".gmw-saf-country").val(l)),gForm.find(".gmw-submit").toggleClass("submitted"),gForm.find(".gmw-lat").val(m),gForm.find(".gmw-lng").val(n),a("#"+locatorClicked).hasClass("gmw-locator-submit")?setTimeout(function(){locatorButton.closest(".gmw-locator-btn-wrapper").find(".gmw-locator-btn-loader").fadeToggle("fast",
function(){locatorButton.fadeToggle("fast")});gForm.find(".gmw-submit").click()},1500):a(".locator-submitted").closest(".gmw-locator-btn-wrapper").find(".gmw-locator-btn-loader").fadeToggle("fast",function(){a(".locator-submitted").fadeToggle("fast").removeClass("locator-submitted")}))}a(".gmw-map-loader").fadeOut(1500);navigator.geolocation||a(".gmw-locator-btn-wrapper").hide();a(".gmw-address").focus(function(){a(this).hasClass("gmw-no-address-error")&&a(this).removeClass("gmw-no-address-error")});
a(".gmw-submit").click(function(e){a(e.target).is("input")||a(this).closest("form").submit()});a(".gmw-form input[type='text']").keyup(function(e){13==e.keyCode&&a(this).closest("form").submit()});a(".gmw-form").submit(function(e){var c,b=a(this);b.find(".gmw-paged").val("1");b.find(".gmw-address").hasClass("gmw-full-address")?c=b.find(".gmw-full-address").val():(c=[],b.find(".gmw-address").each(function(){c.push(a(this).val())}),c=c.join(" "));if(!a.trim(c).length){if(b.find(".gmw-address").hasClass("mandatory"))return b.find(".gmw-address").hasClass("gmw-no-address-error")||
b.find(".gmw-address").toggleClass("gmw-no-address-error"),!1;b.find(".gmw-submit").addClass("submitted")}if(1==gmwSettings.general_settings.js_geocode){if(b.find(".prev-address").val()==c&&0<a.trim(b.find(".gmw-lat").val()).length||b.find(".gmw-submit").hasClass("submitted"))return!0;e.preventDefault();geocoder=new google.maps.Geocoder;geocoder.geocode({address:c},function(a,c){c==google.maps.GeocoderStatus.OK?(b.find(".gmw-submit").addClass("submitted"),b.find(".gmw-lat").val(a[0].geometry.location.lat()),
b.find(".gmw-lng").val(a[0].geometry.location.lng()),setTimeout(function(){b.submit()},500)):alert("We could not find the address you entered for the following reason: "+c)})}else return!0});var h=!1;1==gmwSettings.general_settings.auto_locate&&1!=gmwGetCookie("gmw_autolocate")&&(gmwSetCookie("gmw_autolocate",1,1),h=!0,f());a(".gmw-locate-btn").click(function(){locatorClicked=a(this).attr("id");locatorButton=a(this);a(this).toggleClass("locator-submitted");locatorButton.fadeToggle("fast",function(){locatorButton.closest(".gmw-locator-btn-wrapper").find(".gmw-locator-btn-loader").fadeToggle("fast")});
a(".gmw-address").attr("disabled","disabled");a(".gmw-submit").attr("disabled","disabled");setTimeout(function(){f()},500)})});