function gmwMapInit(a){"undefined"==typeof gmwMapObjects&&(gmwMapObjects={});var c,b=a.ID,e=[];c="auto"==a.results_map.zoom_level?13:a.results_map.zoom_level;var f=!1,g=new google.maps.LatLngBounds;gmwMapObjects[b]={form:a,mapId:b,mapElement:"gmw-map-"+b,mapType:a.prefix+"Map"};c={zoom:parseInt(c),draggable:!0,panControl:!0,zoomControl:!0,mapTypeControl:!0,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU,position:google.maps.ControlPosition.TOP_RIGHT},center:new google.maps.LatLng(a.your_lat,
a.your_lng),mapTypeId:google.maps.MapTypeId[a.results_map.map_type],styles:gmwMapObjects[b].mapStyle};gmwMapOptions="undefined"!=typeof gmwMapOptions?gmwMapOptions:{};"undefined"!=typeof gmwMapOptions[b]&&jQuery.extend(c,gmwMapOptions[b]);gmwMapObjects[b].map=new google.maps.Map(document.getElementById("gmw-map-"+b),c);if("undefined"==typeof a.results_map.markers_display||"markers_clusterer"!=a.results_map.markers_display)a.results_map.markers_display="none";"markers_clusterer"==a.results_map.markers_display&&
(psMc=new MarkerClusterer(gmwMapObjects[b].map,e));for(c=0;c<a.results.length;c++){var d;d=new google.maps.LatLng(a.results[c].lat,a.results[c]["long"]);if(g.contains(d)){var k=360/a.results.length,l=d;d=l.lat()+-5E-4*Math.cos(+k*c/180*Math.PI);k=l.lng()+-5E-4*Math.sin(+k*c/180*Math.PI);d=new google.maps.LatLng(d,k);(new google.maps.Polyline({path:[l,d],strokeColor:"#FF0000",strokeOpacity:1,strokeWeight:2})).setMap(gmwMapObjects[b].map)}g.extend(d);e[c]=new google.maps.Marker({position:d,icon:a.results[c].mapIcon,
map:gmwMapObjects[b].map,id:c});"markers_clusterer"==a.results_map.markers_display?psMc.addMarker(e[c]):e[c].setMap(gmwMapObjects[b].map);with({gmwMapMarker:e[c]}){var h=!1;google.maps.event.addListener(gmwMapMarker,"click",function(){h&&(h.close(),h=null);h=new google.maps.InfoWindow({content:a.results[this.id].info_window_content});h.open(gmwMapObjects[b].map,gmwMapMarker)})}}gmwMapObjects[b].markers=e;if(0!=a.your_lat&&0!=a.your_lng){f=new google.maps.LatLng(a.your_lat,a.your_lng);g.extend(f);
var m=new google.maps.InfoWindow({content:a.labels.info_window.your_location});ulMarker=new google.maps.Marker({position:new google.maps.LatLng(a.your_lat,a.your_lng),map:gmwMapObjects[b].map,icon:a.ul_icon});gmwMapObjects[b].userLocation=ulMarker;void 0!=a.results_map.yl_icon&&1==a.results_map.yl_icon&&m.open(gmwMapObjects[b].map,ulMarker);google.maps.event.addListener(ulMarker,"click",function(){m.open(gmwMapObjects[b].map,ulMarker)})}gmwMapObjects[b].bonds=g;1==a.results.length&&0==f?(gmwMapObjects[b].map.setZoom(13),
gmwMapObjects[b].map.panTo(e[0].getPosition())):"auto"!=a.results_map.zoom_level&&!1!==f?(gmwMapObjects[b].map.setZoom(parseInt(a.results_map.zoom_level)),gmwMapObjects[b].map.panTo(f)):"auto"!=a.results_map.zoom_level&&0!=f||gmwMapObjects[b].map.fitBounds(g);google.maps.event.addListenerOnce(gmwMapObjects[b].map,"idle",function(){ExpandControl=document.getElementById("gmw-expand-map-trigger-"+b);gmwMapObjects[b].map.controls[google.maps.ControlPosition.TOP_RIGHT].push(ExpandControl);ExpandControl.style.display=
"block";jQuery("#gmw-expand-map-trigger-"+b).length&&jQuery("#gmw-expand-map-trigger-"+b).click(function(){var a=gmwMapObjects[b].map.getCenter();jQuery(this).closest(".gmw-map-wrapper").toggleClass("gmw-expanded-map");jQuery(this).toggleClass("dashicons-editor-expand").toggleClass("dashicons-editor-contract");setTimeout(function(){google.maps.event.trigger(gmwMapObjects[b].map,"resize");gmwMapObjects[b].map.setCenter(a)},100)})})}
jQuery(document).ready(function(a){(gmwForm.page_load_results_trigger||gmwForm.auto_results_trigger||gmwForm.submitted)&&a("#gmw-map-wrapper-"+gmwForm.ID).length&&(jQuery("#gmw-map-wrapper-"+gmwForm.ID).is(":hidden")?jQuery("#gmw-map-wrapper-"+gmwForm.ID).slideToggle("fast",function(){gmwMapInit(gmwForm)}):gmwMapInit(gmwForm))});